BOARD = adafruit:nrf52:feather52832  # Your board type
PORT = /dev/ttyUSB0                  # Where your board is connected
SKETCH = ../macro-blues                 # Your file name (led.c or led.ino)

NRF5_SDK_PATH = /opt/nRF5_SDK/nRF5_SDK_17.1.0_ddde560

CFLAGS = -I$(NRF5_SDK_PATH)/modules/nrfx \
         -I$(NRF5_SDK_PATH)/modules/nrfx/mdk \
         -I$(NRF5_SDK_PATH)/components/libraries/delay

all:
	arduino-cli compile -b $(BOARD) $(SKETCH) \
		--build-property compiler.c.extra_flags="$(CFLAGS: = )"
	arduino-cli upload -b $(BOARD) -p $(PORT) --input-dir build/$(BOARD)

clean:
	rm -f build
